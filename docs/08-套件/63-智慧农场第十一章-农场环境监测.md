# 第十一章 农场环境监测

## 1、简介

这一章主要是通过蓝牙将各个传感器数据监测到的数据传输到移动端，在移动端的控制界面观察传感器数据的变化。

## 2、课程目标

+ 学习如何使用光照强度传感器来检测光照强度；

+ 学习如何使用温湿度传感器来检测空气中的湿度和温度；

+ 学习如何使用CO2传感器来检测CO2浓度；

+ 学习如何使用土壤湿度传感器来检测土壤的湿度。

## 3、器材准备

+ Arduino UNO主控板*1

+ 传感器扩展板*1

+ 蓝牙模块*1

+ SHT30温湿度传感器*1

+ 光照强度传感器*1

+ 土壤湿度传感器*1

+ CO2传感器*1

+ 杜邦线*5

+ USB数据线*1

## 4、硬件连接

+ SHT30温湿度传感器4P杜邦线连接到传感器扩展板的IIC接口（蓝线D—SDA，绿线C—SCL,红线VCC—5V，黑线GND—GND）（连第2个IIC接口）；

+ 将光线传感器用4P杜邦线连接到传感器扩展板的IIC接口（蓝线D—SDA，绿线C—SCL,红线VCC—5V，黑线GND—GND）（连第1个IIC接口）；

+ 土壤湿度传感器用3P杜邦线连接到传感器扩展板的模拟接口A3（黄线S—A3，红线VCC—5V，黑线GND—GND）；

+ CO2传感器用4P杜邦线连接到传感器扩展板的串口（蓝线RX—D6，绿线TX-D7，红线VCC—5V，黑线GND—GND）；

+ 蓝牙模块用4P杜邦线连接到传感器扩展板的串口（蓝线RX—D8，绿线TX—D9，红线VCC—5V，黑线GND—GND）

确保所有连接都正确无误。

连线图

## 5、实验程序

将以下程序复制到Arduino IDE中，选择好主板和对应的端口，编译上传程序。

```C
//缺程序
```

## 6、观察现象

将这段代码上传到Arduino UNO R3主板上，然后打开蓝牙控制端，点击连接设备，连接成功后就可以在移动端上显示出传感器监测到的数据了，以及还可以看到温度随着时间变化的图表。（蓝牙控制端：<https://ble.openjumper.com/connect>）
监测效果截图
